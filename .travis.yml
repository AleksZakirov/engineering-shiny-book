language: r
cache: packages
dist: trusty
sudo: required
  
env:
  global:
  - MAKEFLAGS="-j 2"
  
install:
  - Rscript -e 'install.packages("remotes")'
  - Rscript -e 'remotes::install_cran(c("golem", "bookdown"))'
  
script:
  - test $TRAVIS_BRANCH == "wip" && make html_wip
  - test $TRAVIS_BRANCH == "master" && make html_master

after_success:
  - test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "wip" && bash deploy.sh
  - test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && bash deploy.sh

